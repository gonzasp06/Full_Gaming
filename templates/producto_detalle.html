<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FullGaming</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo_solo.png') }}">
    <!--Estilo CSS-->
    <link rel="stylesheet"  href="{{ url_for('static', filename='style.css') }}">
    <!-- Vinculacion con Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Scripts de Bootstrap y jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
    <script>
    function cambiarQty(delta){
        const input = document.getElementById('qty');
        let v = parseInt(input.value || "1", 10);
        v = isNaN(v) ? 1 : v;
        v = Math.max(1, v + delta);
        input.value = v;

        const btn = document.getElementById('btnCarrito');
        const url = new URL(btn.getAttribute('href'), window.location.origin);
        url.searchParams.set('cantidad', v);
        btn.setAttribute('href', url.pathname + url.search);
    }
    // inicializa al cargar
    cambiarQty(0);
    </script>
<body>
    {% include 'navbar.html' %} <!--incluye el navabar.html-->

    <div class="producto-detalle-container">
        <div class="row g-4">
            <!-- FOTO GRANDE -->
            <div class="col-md-5">
                <div class="producto-detalle-imagen">
                    {% set foto = producto[6] | replace('\\', '/') if producto[6] else '' %}
                    {% if foto and foto.startswith('static/') %}
                        <img src="{{ url_for('static', filename=foto.split('static/')[1]) }}" alt="{{ producto[1] }}">
                    {% elif foto and foto.startswith('/') %}
                        <img src="{{ foto }}" alt="{{ producto[1] }}">
                    {% elif foto %}
                        <img src="/{{ foto }}" alt="{{ producto[1] }}">
                    {% else %}
                        <img src="{{ url_for('static', filename='images/no-image.png') }}" alt="Sin imagen disponible">
                    {% endif %}
                </div>
            </div>
            
            <!-- INFO PRINCIPAL -->
            <div class="col-md-7">
                <div class="producto-info-wrapper">

                    <div class="producto-meta">
                    <span class="badge-meta">ID: {{ producto[0] }}</span>
                    </div>
                    <h1 class="producto-detalle-titulo">{{ producto[1] }}</h1>

                <p class="producto-detalle-categoria">
                    Categoría: <span>{{ producto[3] }}</span>
                </p>

                <p class="producto-detalle-precio">
                    ${{ producto[4] }}
                </p>

                <ul class="beneficios-lista">
                <li class="beneficio-linea">
                    <img class="beneficio-icono" src="{{ url_for('static', filename='images/envio.png') }}" alt="Envío">
                    <span class="beneficio-texto">Envíos a todo el país.</span>
                </li>

                <li class="beneficio-linea">
                    <img class="beneficio-icono" src="{{ url_for('static', filename='images/seguro.png') }}" alt="Compra segura">
                    <span class="beneficio-texto">Compra segura.</span>
                </li>

                <li class="beneficio-linea">
                    <img class="beneficio-icono" src="{{ url_for('static', filename='images/cuotas.png') }}" alt="Cuotas">
                    <span class="beneficio-texto">
                    6 cuotas sin interés de $
                    {{ "{:,.2f}".format((producto[4] | float) / 6).replace(",", "X").replace(".", ",").replace("X", ".") }}
                    </span>
                </li>

                <li class="beneficio-linea">
                    <img class="beneficio-icono" src="{{ url_for('static', filename='images/garantia.png') }}" alt="Garantía">
                    <span class="beneficio-texto">Garantía - 12 meses</span>
                    <a class="beneficio-link" href="#">Ver términos y condiciones</a>
                </li>
                </ul>

                <!-- Botón agregar al carrito (enlazá a tu ruta real de carrito cuando la tengas) -->
                <a href="/carrito?producto_id={{ producto[0] }}" class="btn-agregar-carrito">
                    <img src="{{ url_for('static', filename='images/carrito.png') }}" alt="Carrito">
                    Agregar al carrito
                </a>
            </div>
        </div>

        <!-- DESCRIPCIÓN LARGA ABAJO -->
        <div class="producto-detalle-descripcion">
            <h2>Descripción</h2>
            <p>{{ producto[2] }}</p>
        </div>
    </div>
    {% include 'footer.html' %}
</body>
</html>